<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
	    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	    <title></title>
	  	<script type="text/javascript" src="../../js/mui.min.js" ></script>
	    <link rel="stylesheet" href="../../css/mui.css" />
	    <link rel="stylesheet" href="../../css/main.css" />
	    <link rel="stylesheet" href="../../css/iconfont.css" />
	    <script type="text/javascript" src="../../js/html-size-calculation.js" ></script>
	</head>
	<style>
	</style>
	<body>
		<div id="app">
			<header class="header">
				<div class="e-icon e-back hd-left" @tap="mui.back()"></div>
				<h2>课件</h2>
			</header>
			<div class="fix-bd">
				<div class="plr30 bgff fix-search">
					<div class="e-search">
						<input type="text" name="" id="" value="" v-model="searchInfo"/>
						<i class="e-icon e-search-btn"></i>
					</div>
				</div>
				<div class="fix-search-box">
					<div class=".mui-table-view-cell" v-for="(value,index) in ware_list">
						<div class="bt ub ub-ac plr30 ptb15">
							<div class="e-coursePic">
								<img :src="fileCover(value)"/>
							</div>
							<p class="ub-f1 fz28 c32 word-break plr30">{{value.filename}}</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			new Vue({
				el:'#app',
				data:function(){
					return{
						list:[],
						classId:'',
						searchInfo : "",
					}
				},
				computed:{
		            ware_list:function(){
			            var search_info = this.searchInfo;
			            var show_list = [];
			            this.list.forEach(function(list_item){
			                if(list_item.filename){
				                if(list_item.filename.indexOf(search_info) != -1){
				                    show_list.push(list_item)
				                }
			                }
			            })
			            return show_list
		            }
		        },
				methods:{
					getlist:function(){
						App.http('teaching/index/coursewareBoxDetail',{
							"auth-token" : App.getItem("token"),
                      		"id" : this.classId,
						},function(data,status){
							console.log(JSON.stringify(data.data.list ));
							this.list = data.data.list
						}.bind(this),'get')
					},
					//设置文件封面
			        fileCover: function(value) {
			        	if(value.ext == "jpg" || value.ext == "png" || value.ext == "tif" || value.ext == "gif") {
			        		var url = value.host + '' + value.url
			        	}else if(value.ext == "pdf") {
			        		var url = "../../images/e-pdf.png"
			        	} else if(value.ext == "html") {
			        		var url = "../../images/e-html"
			        	} else if(value.ext == 'avi') {
			        		var url = "../../images/e-video.png"
			        	} else if(value.ext == 'rm') {
			        		var url = "../../images/e-video.png"
			        	} else if(value.ext == 'txt') {
			        		var url = "../../images/e-txt.png"
			        	} else if(value.ext == 'doc' || value.ext == 'docx') {
			        		var url = "../../images/e-doc.png"
			        	} else if(value.ext == 'ppt' || value.ext == 'pptx') {
			        		var url = "../../images/e-ppt.png"
			        	} else if(value.ext == 'wav' || value.ext == 'mp3' || value.ext == 'ram' || value.ext == 'wma' || value.ext == 'mp4') {
			        		var url = "../../images/e-music.png"
			        	} else {
			        		var url = "../../images/e-psd.png"
			        	}
			        	return url
			        },
			        },
			        mounted: function() {
				        mui.plusReady(function() {
				        	var self = plus.webview.currentWebview();
				        	this.classId = self.class_id
				        	this.getlist()
				        }.bind(this))
			        }
			        })</script>
	</body>
</html>
